(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3c2e5727"],{"00b4":function(t,e,s){"use strict";s("ac1f");var i=s("23e7"),a=s("c65b"),r=s("1626"),c=s("825a"),n=s("577e"),o=function(){var t=!1,e=/[ac]/;return e.exec=function(){return t=!0,/./.exec.apply(this,arguments)},!0===e.test("abc")&&t}(),l=/./.test;i({target:"RegExp",proto:!0,forced:!o},{test:function(t){var e=c(this),s=n(t),i=e.exec;if(!r(i))return a(l,e,s);var o=a(i,e,s);return null!==o&&(c(o),!0)}})},"107c":function(t,e,s){"use strict";var i=s("d039"),a=s("cfe9"),r=a.RegExp;t.exports=i((function(){var t=r("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")}))},1523:function(t,e,s){},"2c69":function(t,e,s){"use strict";s.r(e);s("4de4"),s("d81d"),s("e9f5"),s("ab43"),s("d3b7");var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"order-confirm"},[e("order-header",{attrs:{title:"订单确认"},scopedSlots:t._u([{key:"tip",fn:function(){return[e("span",[t._v("请认真填写收货地址")])]},proxy:!0}])}),e("svg",{staticStyle:{position:"absolute",width:"0px",height:"0px",overflow:"hidden"},attrs:{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[e("defs",[e("symbol",{attrs:{id:"icon-add",viewBox:"0 0 31 32"}},[e("title",[t._v("add")]),e("path",{staticClass:"path1",attrs:{d:"M30.745 15.152h-14.382v-14.596c0-0.308-0.243-0.557-0.543-0.557s-0.543 0.249-0.543 0.557v14.596h-14.665c-0.3 0-0.543 0.249-0.543 0.557s0.243 0.557 0.543 0.557h14.665v15.177c0 0.307 0.243 0.557 0.543 0.557s0.543-0.249 0.543-0.557v-15.177h14.382c0.3 0 0.543-0.249 0.543-0.557s-0.243-0.557-0.543-0.557z"}})]),e("symbol",{attrs:{id:"icon-edit",viewBox:"0 0 32 32"}},[e("title",[t._v("edit")]),e("path",{staticClass:"path1",attrs:{d:"M28.287 8.51l-4.805-4.806 0.831-0.831c0.472-0.472 1.086-0.777 1.564-0.777 0.248 0 0.452 0.082 0.622 0.253l3.143 3.144c0.539 0.54 0.133 1.529-0.524 2.186l-0.831 0.831zM26.805 9.992l-1.138 1.138-4.805-4.806 1.138-1.138 4.805 4.806zM24.186 12.612l-14.758 14.762-4.805-4.806 14.758-14.762 4.805 4.806zM7.379 28.288l-4.892 1.224 1.223-4.894 3.669 3.67zM31.123 4.011l-3.143-3.144c-0.567-0.567-1.294-0.867-2.103-0.867-1.036 0-2.174 0.52-3.045 1.391l-20.429 20.436c-0.135 0.134-0.23 0.302-0.276 0.487l-2.095 8.385c-0.089 0.355 0.017 0.736 0.276 0.995 0.198 0.198 0.461 0.307 0.741 0.307 0.085 0 0.171-0.010 0.254-0.031l8.381-2.096c0.185-0.047 0.354-0.142 0.487-0.276l20.43-20.436c1.409-1.41 2.042-3.632 0.524-5.15v0z"}})]),e("symbol",{attrs:{id:"icon-del",viewBox:"0 0 32 32"}},[e("title",[t._v("delete")]),e("path",{staticClass:"path1",attrs:{d:"M11.355 4.129v-2.065h9.29v2.065h-9.29zM6.194 29.935v-23.742h19.613v23.742h-19.613zM30.968 4.129h-8.258v-3.097c0-0.569-0.463-1.032-1.032-1.032h-11.355c-0.569 0-1.032 0.463-1.032 1.032v3.097h-8.258c-0.569 0-1.032 0.463-1.032 1.032s0.463 1.032 1.032 1.032h3.097v24.774c0 0.569 0.463 1.032 1.032 1.032h21.677c0.569 0 1.032-0.463 1.032-1.032v-24.774h3.097c0.569 0 1.032-0.463 1.032-1.032s-0.463-1.032-1.032-1.032v0z"}}),e("path",{staticClass:"path2",attrs:{d:"M10.323 9.806c-0.569 0-1.032 0.463-1.032 1.032v14.452c0 0.569 0.463 1.032 1.032 1.032s1.032-0.463 1.032-1.032v-14.452c0-0.569-0.463-1.032-1.032-1.032z"}}),e("path",{staticClass:"path3",attrs:{d:"M16 9.806c-0.569 0-1.032 0.463-1.032 1.032v14.452c0 0.569 0.463 1.032 1.032 1.032s1.032-0.463 1.032-1.032v-14.452c0-0.569-0.463-1.032-1.032-1.032z"}}),e("path",{staticClass:"path4",attrs:{d:"M21.677 9.806c-0.569 0-1.032 0.463-1.032 1.032v14.452c0 0.569 0.463 1.032 1.032 1.032s1.032-0.463 1.032-1.032v-14.452c0-0.569-0.463-1.032-1.032-1.032z"}})])])]),e("div",{staticClass:"wrapper"},[e("div",{staticClass:"container"},[e("div",{staticClass:"order-box"},[e("div",{staticClass:"item-address"},[e("h2",{staticClass:"addr-title"},[t._v("收货地址")]),e("div",{staticClass:"addr-list clearfix"},[t._l(t.list,(function(s,i){return e("div",{key:i,staticClass:"addr-info",class:{checked:i==t.checkIndex},on:{click:function(e){t.checkIndex=i}}},[e("h2",[t._v(t._s(s.receiverName))]),e("div",{staticClass:"phone"},[t._v(t._s(s.receiverMobile))]),e("div",{staticClass:"street"},[t._v(t._s(s.receiverProvince+" "+s.receiverCity+" "+s.receiverDistrict+" "+s.receiverAddress))]),e("div",{staticClass:"action"},[e("a",{staticClass:"fl",attrs:{href:"javascript:;"},on:{click:function(e){return t.delAddress(s)}}},[e("svg",{staticClass:"icon icon-del"},[e("use",{attrs:{"xlink:href":"#icon-del"}})])]),e("a",{staticClass:"fr",attrs:{href:"javascript:;"},on:{click:function(e){return t.editAddressModal(s)}}},[e("svg",{staticClass:"icon icon-edit"},[e("use",{attrs:{"xlink:href":"#icon-edit"}})])])])])})),e("div",{staticClass:"addr-add",on:{click:t.openAddressModal}},[e("div",{staticClass:"icon-add"}),e("div",[t._v("添加新地址")])])],2)]),e("div",{staticClass:"item-good"},[e("h2",[t._v("商品")]),e("ul",t._l(t.cartList,(function(s,i){return e("li",{key:i},[e("div",{staticClass:"good-name"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:s.productMainImage,expression:"item.productMainImage"}],attrs:{alt:""}}),e("span",[t._v(t._s(s.productName+" "+s.productSubtitle))])]),e("div",{staticClass:"good-price"},[t._v(t._s(s.productPrice)+"元x"+t._s(s.quantity))]),e("div",{staticClass:"good-total"},[t._v(t._s(s.productTotalPrice)+"元")])])})),0)]),t._m(0),t._m(1),e("div",{staticClass:"detail"},[e("div",{staticClass:"item"},[e("span",{staticClass:"item-name"},[t._v("商品件数：")]),e("span",{staticClass:"item-val"},[t._v(t._s(t.count)+"件")])]),e("div",{staticClass:"item"},[e("span",{staticClass:"item-name"},[t._v("商品总价：")]),e("span",{staticClass:"item-val"},[t._v(t._s(t.cartTotalPrice)+"元")])]),t._m(2),t._m(3),e("div",{staticClass:"item-total"},[e("span",{staticClass:"item-name"},[t._v("应付总额：")]),e("span",{staticClass:"item-val"},[t._v(t._s(t.cartTotalPrice)+"元")])])]),e("div",{staticClass:"btn-group"},[e("a",{staticClass:"btn btn-default btn-large",attrs:{href:"/#/cart"}},[t._v("返回购物车")]),e("a",{staticClass:"btn btn-large",attrs:{href:"javascript:;"},on:{click:t.orderSubmit}},[t._v("去结算")])])])])]),e("modal",{attrs:{title:"新增确认",btnType:"1",showModal:t.showEditModal},on:{cancel:function(e){t.showEditModal=!1},submit:t.submitAddress},scopedSlots:t._u([{key:"body",fn:function(){return[e("div",{staticClass:"edit-wrap"},[e("div",{staticClass:"item"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.checkedItem.receiverName,expression:"checkedItem.receiverName"}],staticClass:"input",attrs:{type:"text",placeholder:"姓名"},domProps:{value:t.checkedItem.receiverName},on:{input:function(e){e.target.composing||t.$set(t.checkedItem,"receiverName",e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.checkedItem.receiverMobile,expression:"checkedItem.receiverMobile"}],staticClass:"input",attrs:{type:"text",placeholder:"手机号"},domProps:{value:t.checkedItem.receiverMobile},on:{input:function(e){e.target.composing||t.$set(t.checkedItem,"receiverMobile",e.target.value)}}})]),e("div",{staticClass:"item"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.checkedItem.receiverProvince,expression:"checkedItem.receiverProvince"}],attrs:{name:"province"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.checkedItem,"receiverProvince",e.target.multiple?s:s[0])}}},[e("option",{attrs:{value:"北京"}},[t._v("北京")]),e("option",{attrs:{value:"天津"}},[t._v("天津")]),e("option",{attrs:{value:"河北"}},[t._v("河北")])]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.checkedItem.receiverCity,expression:"checkedItem.receiverCity"}],attrs:{name:"city"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.checkedItem,"receiverCity",e.target.multiple?s:s[0])}}},[e("option",{attrs:{value:"北京"}},[t._v("北京")]),e("option",{attrs:{value:"天津"}},[t._v("天津")]),e("option",{attrs:{value:"河北"}},[t._v("石家庄")])]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.checkedItem.receiverDistrict,expression:"checkedItem.receiverDistrict"}],attrs:{name:"district"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.checkedItem,"receiverDistrict",e.target.multiple?s:s[0])}}},[e("option",{attrs:{value:"北京"}},[t._v("昌平区")]),e("option",{attrs:{value:"天津"}},[t._v("海淀区")]),e("option",{attrs:{value:"河北"}},[t._v("东城区")]),e("option",{attrs:{value:"天津"}},[t._v("西城区")]),e("option",{attrs:{value:"河北"}},[t._v("顺义区")]),e("option",{attrs:{value:"天津"}},[t._v("房山区")])])]),e("div",{staticClass:"item"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.checkedItem.receiverAddress,expression:"checkedItem.receiverAddress"}],attrs:{name:"street"},domProps:{value:t.checkedItem.receiverAddress},on:{input:function(e){e.target.composing||t.$set(t.checkedItem,"receiverAddress",e.target.value)}}})]),e("div",{staticClass:"item"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.checkedItem.receiverZip,expression:"checkedItem.receiverZip"}],staticClass:"input",attrs:{type:"text",placeholder:"邮编"},domProps:{value:t.checkedItem.receiverZip},on:{input:function(e){e.target.composing||t.$set(t.checkedItem,"receiverZip",e.target.value)}}})])])]},proxy:!0}])}),e("modal",{attrs:{title:"删除确认",btnType:"1",showModal:t.showDelModal},on:{cancel:function(e){t.showDelModal=!1},submit:t.submitAddress},scopedSlots:t._u([{key:"body",fn:function(){return[e("p",[t._v("您确认要删除此地址吗？")])]},proxy:!0}])})],1)},a=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"item-shipping"},[e("h2",[t._v("配送方式")]),e("span",[t._v("包邮")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"item-invoice"},[e("h2",[t._v("发票")]),e("a",{attrs:{href:"javascript:;"}},[t._v("电子发票")]),e("a",{attrs:{href:"javascript:;"}},[t._v("个人")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"item"},[e("span",{staticClass:"item-name"},[t._v("优惠活动：")]),e("span",{staticClass:"item-val"},[t._v("0元")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"item"},[e("span",{staticClass:"item-name"},[t._v("运费：")]),e("span",{staticClass:"item-val"},[t._v("0元")])])}],r=(s("14d9"),s("910d"),s("ac1f"),s("00b4"),s("c3d4")),c=s("714b"),n={name:"order-confirm",data:function(){return{list:[],cartList:[],cartTotalPrice:0,count:0,checkedItem:{},userAction:"",showDelModal:!1,showEditModal:!1,checkIndex:0}},components:{OrderHeader:r["a"],Modal:c["a"]},mounted:function(){this.getAddressList(),this.getCartList()},methods:{getAddressList:function(){var t=this;this.axios.get("/shippings").then((function(e){t.list=e.list}))},openAddressModal:function(){this.userAction=0,this.checkedItem={},this.showEditModal=!0},editAddressModal:function(t){this.userAction=1,this.checkedItem=t,this.showEditModal=!0},delAddress:function(t){this.checkedItem=t,this.userAction=2,this.showDelModal=!0},submitAddress:function(){var t,e,s=this,i=this.checkedItem,a=this.userAction,r={};if(0==a?(t="post",e="/shippings"):1==a?(t="put",e="/shippings/".concat(i.id)):(t="delete",e="/shippings/".concat(i.id)),0==a||1==a){var c=i.receiverName,n=i.receiverMobile,o=i.receiverProvince,l=i.receiverCity,d=i.receiverDistrict,v=i.receiverAddress,u=i.receiverZip,p="";if(c?n&&/\d{11}/.test(n)?o?l?v&&d?/\d{6}/.test(u)||(p="请输入六位邮编"):p="请输入收货地址":p="请选择对应的城市":p="请选择省份":p="请输入正确格式的手机号":p="请输入收货人名称",p)return void this.$message.error(p);r={receiverName:c,receiverMobile:n,receiverProvince:o,receiverCity:l,receiverDistrict:d,receiverAddress:v,receiverZip:u}}this.axios[t](e,r).then((function(){s.closeModal(),s.getAddressList(),s.$message.success("操作成功")}))},closeModal:function(){this.checkedItem={},this.userAction="",this.showDelModal=!1,this.showEditModal=!1},getCartList:function(){var t=this;this.axios.get("/carts").then((function(e){var s=e.cartProductVoList;t.cartTotalPrice=e.cartTotalPrice,t.cartList=s.filter((function(t){return t.productSelected})),t.cartList.map((function(e){t.count+=e.quantity}))}))},orderSubmit:function(){var t=this,e=this.list[this.checkIndex];e?this.axios.post("/orders",{shippingId:e.id}).then((function(e){t.$router.push({path:"/order/pay",query:{orderNo:e.orderNo}})})):this.$message.error("请选择一个收货地址")}}},o=n,l=(s("a6bf"),s("2877")),d=Object(l["a"])(o,i,a,!1,null,null,null);e["default"]=d.exports},9263:function(t,e,s){"use strict";var i=s("c65b"),a=s("e330"),r=s("577e"),c=s("ad6d"),n=s("9f7f"),o=s("5692"),l=s("7c73"),d=s("69f3").get,v=s("fce3"),u=s("107c"),p=o("native-string-replace",String.prototype.replace),h=RegExp.prototype.exec,m=h,f=a("".charAt),_=a("".indexOf),g=a("".replace),x=a("".slice),C=function(){var t=/a/,e=/b*/g;return i(h,t,"a"),i(h,e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),b=n.BROKEN_CARET,I=void 0!==/()??/.exec("")[1],k=C||I||b||v||u;k&&(m=function(t){var e,s,a,n,o,v,u,k=this,y=d(k),w=r(t),M=y.raw;if(M)return M.lastIndex=k.lastIndex,e=i(m,M,w),k.lastIndex=M.lastIndex,e;var A=y.groups,E=b&&k.sticky,N=i(c,k),P=k.source,S=0,z=w;if(E&&(N=g(N,"y",""),-1===_(N,"g")&&(N+="g"),z=x(w,k.lastIndex),k.lastIndex>0&&(!k.multiline||k.multiline&&"\n"!==f(w,k.lastIndex-1))&&(P="(?: "+P+")",z=" "+z,S++),s=new RegExp("^(?:"+P+")",N)),I&&(s=new RegExp("^"+P+"$(?!\\s)",N)),C&&(a=k.lastIndex),n=i(h,E?s:k,z),E?n?(n.input=x(n.input,S),n[0]=x(n[0],S),n.index=k.lastIndex,k.lastIndex+=n[0].length):k.lastIndex=0:C&&n&&(k.lastIndex=k.global?n.index+n[0].length:a),I&&n&&n.length>1&&i(p,n[0],s,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(n[o]=void 0)})),n&&A)for(n.groups=v=l(null),o=0;o<A.length;o++)u=A[o],v[u[0]]=n[u[1]];return n}),t.exports=m},"9f7f":function(t,e,s){"use strict";var i=s("d039"),a=s("cfe9"),r=a.RegExp,c=i((function(){var t=r("a","y");return t.lastIndex=2,null!==t.exec("abcd")})),n=c||i((function(){return!r("a","y").sticky})),o=c||i((function(){var t=r("^r","gy");return t.lastIndex=2,null!==t.exec("str")}));t.exports={BROKEN_CARET:o,MISSED_STICKY:n,UNSUPPORTED_Y:c}},a6bf:function(t,e,s){"use strict";s("f18b")},ab43:function(t,e,s){"use strict";var i=s("23e7"),a=s("c65b"),r=s("59ed"),c=s("825a"),n=s("46c4"),o=s("c5cc"),l=s("9bdd"),d=s("2a62"),v=s("2baa"),u=s("f99f"),p=s("c430"),h=!p&&!v("map",(function(){})),m=!p&&!h&&u("map",TypeError),f=p||h||m,_=o((function(){var t=this.iterator,e=c(a(this.next,t)),s=this.done=!!e.done;if(!s)return l(t,this.mapper,[e.value,this.counter++],!0)}));i({target:"Iterator",proto:!0,real:!0,forced:f},{map:function(t){c(this);try{r(t)}catch(e){d(this,"throw",e)}return m?a(m,this,t):new _(n(this),{mapper:t})}})},ac1f:function(t,e,s){"use strict";var i=s("23e7"),a=s("9263");i({target:"RegExp",proto:!0,forced:/./.exec!==a},{exec:a})},ad6d:function(t,e,s){"use strict";var i=s("825a");t.exports=function(){var t=i(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e}},bcac:function(t,e,s){"use strict";s("1523")},c3d4:function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"order-header"},[e("div",{staticClass:"container clearfix"},[t._m(0),e("div",{staticClass:"title"},[e("h2",[t._v(t._s(t.title)),t._t("tip")],2)]),e("div",{staticClass:"username"},[e("a",{attrs:{href:"javascript:;"}},[t._v(t._s(t.username))])])])])},a=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"header-logo"},[e("a",{attrs:{href:"/#/index"}})])}],r=s("5530"),c=s("2f62"),n={name:"order-header",props:{title:String},computed:Object(r["a"])({},Object(c["c"])(["username"]))},o=n,l=(s("bcac"),s("2877")),d=Object(l["a"])(o,i,a,!1,null,null,null);e["a"]=d.exports},d81d:function(t,e,s){"use strict";var i=s("23e7"),a=s("b727").map,r=s("1dde"),c=r("map");i({target:"Array",proto:!0,forced:!c},{map:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},f18b:function(t,e,s){},fce3:function(t,e,s){"use strict";var i=s("d039"),a=s("cfe9"),r=a.RegExp;t.exports=i((function(){var t=r(".","s");return!(t.dotAll&&t.test("\n")&&"s"===t.flags)}))}}]);
//# sourceMappingURL=chunk-3c2e5727.51fdef28.js.map